import{s as d,b as m,c as x,d as f,r as p,j as e,S as g}from"./index-B12FuQRA.js";import{u as b}from"./index.esm-BmF4lNU3.js";async function h(){const{data:s,error:t}=await d.from("settings").select("*").single();if(t)throw console.error(t),new Error("Settings could not be loaded");return s}async function j(s){const{data:t,error:n}=await d.from("settings").update(s).eq("id",1).single();if(n)throw console.error(n),new Error("Settings could not be updated");return t}function N(){const{data:s,isLoading:t,error:n}=m({queryKey:["settings"],queryFn:h});return{settings:s,isLoading:t,error:n}}function y(){const s=x(),{mutate:t,isPending:n,error:o}=f({mutationFn:j,onSuccess:()=>{s.invalidateQueries({queryKey:["settings"]})}});return{updateSettings:t,isUpdating:n,error:o}}function k(){const{settings:s,isLoading:t}=N(),{updateSettings:n,isUpdating:o}=y();function a(l){n(l)}const{register:r,handleSubmit:c,formState:{errors:i},reset:u}=b({defaultValues:s||{}});return p.useEffect(()=>{s&&u(s)},[s,u]),t||o?e.jsx(g,{}):e.jsxs("form",{onSubmit:c(a),className:"w-full max-w-3xl mx-auto grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Minimum nights"}),e.jsx("input",{type:"number",...r("minNights",{required:!0,min:1}),className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"}),i.minNights&&e.jsx("p",{className:"text-red-400",children:"Minimum nights is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Maximum nights"}),e.jsx("input",{type:"number",...r("maxNights",{required:!0,min:1}),className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"}),i.maxNights&&e.jsx("p",{className:"text-red-400",children:"Maximum nights is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Maximum guests"}),e.jsx("input",{type:"number",...r("maxGuests",{required:!0,min:1}),className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"}),i.maxGuests&&e.jsx("p",{className:"text-red-400",children:"Maximum guests is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Breakfast price"}),e.jsx("input",{type:"number",...r("breakfastPrice",{required:!0,min:0}),className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"}),i.breakfastPrice&&e.jsx("p",{className:"text-red-400",children:"Breakfast price is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cleaning fee"}),e.jsx("input",{type:"number",...r("cleaningFee",{required:!0,min:0}),className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"}),i.cleaningFee&&e.jsx("p",{className:"text-red-400",children:"Cleaning fee is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Check-in time"}),e.jsx("input",{type:"time",...r("checkInTime",{required:!0}),className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"}),i.checkInTime&&e.jsx("p",{className:"text-red-400",children:"Check-in time is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Check-out time"}),e.jsx("input",{type:"time",...r("checkOutTime",{required:!0}),className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"}),i.checkOutTime&&e.jsx("p",{className:"text-red-400",children:"Check-out time is required"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Additional notes"}),e.jsx("textarea",{...r("notes"),rows:4,className:"w-full rounded-md border border-stone-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-stone-400"})]}),e.jsxs("div",{className:"col-span-2 flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 rounded-md border border-stone-300 hover:bg-stone-100 cursor-pointer",onClick:()=>u(s),children:"Reset"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-emerald-500 text-white font-semibold rounded-lg shadow-md hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-400 transition duration-200 ease-in-out cursor-pointer",children:"Save Settings"})]})]})}function w(){return e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl pt-5 pb-10 font-semibold",children:"Your Setting of Apartments"}),e.jsx(k,{})]})}export{w as default};
